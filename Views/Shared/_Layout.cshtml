<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EcoSwap • Sustainable Alternatives Platform</title>
  <meta name="description" content="EcoSwap is a sustainability platform that helps users find eco-friendly alternatives, track impact, and engage with the community." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="~/css/style.css" asp-append-version="true" />



  <style>
    :root {
      --bg: #ffffff;
      --bg-soft: #fafbfc;
      --panel: #f8f9fa;
      --border: #e1e5e9;
      --border-light: #f0f2f5;
      --muted: #6b7280;
      --text: #1f2937;
      --text-secondary: #4b5563;
      --primary: #059669; /* eco green */
      --primary-light: #d1fae5;
      --primary-hover: #047857;
      --accent: #2563eb; /* clean blue */
      --accent-light: #dbeafe;
      --danger: #dc2626;
      --danger-light: #fef2f2;
      --radius: 12px;
      --radius-sm: 8px;
      --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 4px 20px rgba(0, 0, 0, 0.08);
    }
    * { box-sizing: border-box }
    html, body { height: 100% }
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      font-size: 14px;
    }
    a { color: inherit; text-decoration: none }
    img { max-width: 100%; display: block }
    .container { width: min(1200px, 92%); margin: 0 auto }

    /* Header */
    header {
      position: sticky; top: 0; z-index: 50;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
    }
    .nav { display: flex; align-items: center; justify-content: space-between; padding: 16px 0 }
    .brand { display: flex; align-items: center; gap: 12px; font-weight: 700; font-size: 18px; color: var(--text) }
    .brand .logo {
      width: 32px; height: 32px; border-radius: var(--radius-sm);
      background: linear-gradient(135deg, var(--primary), var(--accent));
      display: flex; align-items: center; justify-content: center;
      color: white; font-weight: 600; font-size: 14px;
    }
    nav ul { list-style: none; display: flex; gap: 8px; padding: 0; margin: 0 }
    nav a { 
      color: var(--text-secondary); 
      padding: 8px 16px; 
      border-radius: var(--radius-sm); 
      font-weight: 500;
      transition: all 0.2s ease;
    }
    nav a:hover { background: var(--panel); color: var(--text) }
    .nav-cta { display: flex; gap: 8px }
    .btn { 
      cursor: pointer; border: 0; border-radius: var(--radius-sm); 
      padding: 10px 16px; font-weight: 600; font-size: 14px;
      transition: all 0.2s ease; display: inline-flex; align-items: center; gap: 8px;
    }
    .btn-primary { 
      background: var(--primary); color: white; 
    }
    .btn-primary:hover { background: var(--primary-hover) }
    .btn-ghost { 
      background: transparent; color: var(--text-secondary); 
      border: 1px solid var(--border);
    }
    .btn-ghost:hover { background: var(--panel); color: var(--text) }

    /* Hero */
    .hero { padding: 64px 0 48px }
    .hero-grid { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 48px; align-items: center }
    .kicker { 
      color: var(--primary); font-weight: 600; letter-spacing: 0.5px; 
      text-transform: uppercase; font-size: 12px; margin-bottom: 16px;
    }
    h1 { 
      font-size: clamp(32px, 4vw, 48px); line-height: 1.1; margin: 0 0 20px; 
      font-weight: 700; color: var(--text);
    }
    .lead { color: var(--text-secondary); font-size: clamp(16px, 2vw, 18px); margin-bottom: 32px }
    .hero-card { 
      background: var(--panel); 
      border: 1px solid var(--border); 
      padding: 24px; 
      border-radius: var(--radius); 
      box-shadow: var(--shadow-lg);
    }
    .hero-metrics { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-top: 20px }
    .metric { 
      background: var(--bg); 
      border: 1px solid var(--border-light); 
      padding: 20px; 
      border-radius: var(--radius-sm); 
      text-align: center;
    }
    .metric .num { font-size: 24px; font-weight: 800; color: var(--text); margin-bottom: 4px }
    .muted { color: var(--muted); font-size: 13px }

    /* Sections */
    section { padding: 56px 0 }
    .section-head { 
      display: flex; align-items: end; justify-content: space-between; 
      gap: 24px; margin-bottom: 32px 
    }
    .section-head h2 { 
      margin: 0; font-size: clamp(24px, 3vw, 32px); 
      font-weight: 700; color: var(--text);
    }
    .section-desc { color: var(--text-secondary); margin-top: 8px; max-width: 600px }

    .grid { display: grid; gap: 20px }
    .grid-3 { grid-template-columns: repeat(3, 1fr) }
    .grid-2 { grid-template-columns: repeat(2, 1fr) }
    .card { 
      background: var(--bg); 
      border: 1px solid var(--border); 
      border-radius: var(--radius); 
      overflow: hidden; 
      box-shadow: var(--shadow);
      transition: all 0.2s ease;
    }
    .card:hover { box-shadow: var(--shadow-lg); transform: translateY(-2px) }
    .card .body { padding: 24px }
    .tag { 
      display: inline-block; font-size: 11px; padding: 4px 10px; 
      border-radius: 999px; background: var(--primary-light); 
      color: var(--primary); font-weight: 600; text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Products */
    .product { display: flex; gap: 16px; align-items: center }
    .product img { 
      width: 64px; height: 64px; border-radius: var(--radius-sm); 
      object-fit: cover; border: 1px solid var(--border-light);
    }
    .product h3 { margin: 0 0 6px; font-size: 16px; font-weight: 600 }

    /* Calculator */
    .calc { display: grid; gap: 20px }
    .field { display: grid; gap: 8px }
    label { font-weight: 600; color: var(--text); font-size: 14px }
    input[type="number"], input[type="text"], input[type="email"], input[type="password"], select, textarea {
      background: var(--bg); color: var(--text); 
      border: 1px solid var(--border); border-radius: var(--radius-sm); 
      padding: 12px 16px; font-size: 14px;
      transition: all 0.2s ease;
    }
    input:focus, select:focus, textarea:focus {
      outline: none; border-color: var(--primary); 
      box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
    }
    input[type="range"] {
      -webkit-appearance: none; background: var(--border); height: 6px; 
      border-radius: 3px; outline: none;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none; width: 20px; height: 20px; 
      background: var(--primary); border-radius: 50%; cursor: pointer;
    }
    .result { 
      display: flex; align-items: center; justify-content: space-between; 
      padding: 20px; background: var(--panel); 
      border: 1px solid var(--border); border-radius: var(--radius-sm);
    }

    /* Community */
    .post { 
      display: grid; gap: 12px; padding: 20px; 
      border-bottom: 1px solid var(--border-light);
    }
    .post:last-child { border-bottom: 0 }
    .votes { display: flex; align-items: center; gap: 12px }
    .vote-btn { 
      padding: 8px 12px; border-radius: var(--radius-sm); 
      background: var(--panel); border: 1px solid var(--border); 
      cursor: pointer; color: var(--text-secondary);
      transition: all 0.2s ease;
    }
    .vote-btn:hover { background: var(--primary-light); color: var(--primary) }

    /* Admin */
    table { 
      width: 100%; border-collapse: collapse; 
      border-radius: var(--radius); border: 1px solid var(--border);
      background: var(--bg);
    }
    th, td { padding: 16px; border-bottom: 1px solid var(--border-light); text-align: left }
    th { background: var(--panel); font-weight: 600; color: var(--text) }
    td { color: var(--text-secondary) }

    /* Footer */
    footer { 
      padding: 40px 0; border-top: 1px solid var(--border); 
      background: var(--panel); color: var(--text-secondary);
    }

    /* Responsive */
    @@media (max-width: 960px) {
      .hero-grid { grid-template-columns: 1fr; gap: 32px }s
      .grid-3 { grid-template-columns: 1fr 1fr }
      .grid-2 { grid-template-columns: 1fr }
      nav ul { display: none }
      .menu-toggle { display: inline-flex }
    }
    @@media (max-width: 640px) {
      .grid-3 { grid-template-columns: 1fr }
      .section-head { flex-direction: column; align-items: flex-start; gap: 16px }
      .hero-metrics { grid-template-columns: 1fr; gap: 12px }
    }
    @@media (min-width: 961px) { .menu-toggle { display: none } }

    /* Dialog */
    dialog { 
      border: 1px solid var(--border); background: var(--bg); 
      color: var(--text); border-radius: var(--radius); 
      padding: 0; box-shadow: var(--shadow-lg); max-width: 400px;
    }
    dialog::backdrop { background: rgba(0, 0, 0, 0.3) }
    dialog .dlg-head { 
      padding: 20px 24px; border-bottom: 1px solid var(--border-light); 
      display: flex; align-items: center; justify-content: space-between;
      background: var(--panel);
    }
    dialog .dlg-body { padding: 24px }

    /* Additional flat design touches */
    h3 { margin: 0 0 8px; font-size: 16px; font-weight: 600; color: var(--text) }
    .hero-card h3 { font-size: 14px; margin: 12px 0 6px }
    
    /* Clean inputs and buttons */
    .btn { border: none; font-family: inherit }
    .search-controls { display: flex; gap: 12px; flex-wrap: wrap; align-items: center }
    .search-controls input, .search-controls select { min-width: 200px }

    /* Flat shadows and borders */
    .card { box-shadow: none; border: 1px solid var(--border) }
    .card:hover { box-shadow: var(--shadow); border-color: var(--primary) }
    
    /* Status indicators */
    .status-badge {
      display: inline-block; padding: 4px 8px; border-radius: var(--radius-sm);
      font-size: 12px; font-weight: 500;
    }
    .status-success { background: var(--primary-light); color: var(--primary) }
    .status-warning { background: #fef3c7; color: #d97706 }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <a class="brand" href="/home" aria-label="EcoSwap Home">
        <span class="logo" aria-hidden="true">🌱</span>
        <span>EcoSwap</span>
      </a>
      <button class="btn btn-ghost menu-toggle" onclick="toggleMenu()" aria-label="Open Menu">☰</button>
      <nav id="mainNav" aria-label="Primary Navigation">
        <ul>
          <li><a href="#features">Features</a></li>
          <li><a href="#alternatives">Alternatives</a></li>
          <li><a href="#calculator">Calculator</a></li>
          <li><a href="#community">Community</a></li>
          <li><a href="/home/shop">Shop</a></li>
          <li><a asp-controller="Home" asp-action="About">About</a></li>
        </ul>
      </nav>
      <div class="nav-cta">
        <button class="btn btn-ghost" onclick="openAuth('login')">Log in</button>
        <button class="btn btn-primary" onclick="openAuth('signup')">Sign up</button>
      </div>
    </div>
  </header>

  <main id="home" class="container">
   
            @RenderBody()
  </main>

  <footer>
    <div class="container" style="display: flex; justify-content: space-between; gap: 12px; flex-wrap: wrap; align-items: center">
      <div>© <span id="year"></span> EcoSwap • Built for campus & community sustainability.</div>
      <div style="display: flex; gap: 16px">
        <a href="#features" style="color: var(--text-secondary)">Features</a>
        <a href="#community" style="color: var(--text-secondary)">Community</a>
        <a href="#admin" style="color: var(--text-secondary)">Admin</a>
      </div>
    </div>
  </footer>

  <!-- Auth Dialog -->
  <dialog id="authDialog">
    <div class="dlg-head">
      <strong id="authTitle">Log in</strong>
      <button class="btn btn-ghost" onclick="closeAuth()" style="padding: 4px 8px">✕</button>
    </div>
    <div class="dlg-body">
      <div class="grid">
        <div class="field">
          <label for="email">Email</label>
          <input id="email" type="email" placeholder="you@example.com" />
        </div>
        <div class="field">
          <label for="password">Password</label>
          <input id="password" type="password" placeholder="Enter password" />
        </div>
        <button class="btn btn-primary" onclick="closeAuth()" style="margin-top: 8px">Continue</button>
      </div>
    </div>
  </dialog>

  <!-- New Post Dialog -->
  <dialog id="postDialog">
    <div class="dlg-head">
      <strong>Share a suggestion</strong>
      <button class="btn btn-ghost" onclick="document.getElementById('postDialog').close()" style="padding: 4px 8px">✕</button>
    </div>
    <div class="dlg-body">
      <div class="grid">
        <div class="field">
          <label for="postTitle">Title</label>
          <input id="postTitle" placeholder="e.g., Switch to shampoo bars" />
        </div>
        <div class="field">
          <label for="postBody">Details (optional)</label>
          <textarea id="postBody" rows="4" placeholder="Share tips, price, store, or pros/cons…"></textarea>
        </div>
        <div style="display: flex; align-items: center; gap: 8px; margin: 8px 0">
          <input type="checkbox" id="anon" /> 
          <label for="anon" style="font-weight: 400; margin: 0">Post anonymously</label>
        </div>
        <button class="btn btn-primary" onclick="submitPost()">Publish Post</button>
      </div>
    </div>
  </dialog>

  <script>
    // Mini data
    const PRODUCTS = [
      { id: 1, name: 'Bamboo Toothbrush', cat: 'Personal Care', impactKg: 0.3, img: 'https://images.unsplash.com/photo-1585238342028-4bbc3a8d7b4a' },
      { id: 2, name: 'Stainless Steel Bottle', cat: 'Kitchen', impactKg: 1.2, img: 'https://images.unsplash.com/photo-1545167622-3a6ac756afa4' },
      { id: 3, name: 'Shampoo Bar', cat: 'Personal Care', impactKg: 0.5, img: 'https://images.unsplash.com/photo-1604335399105-0e0f2c564f5a' },
      { id: 4, name: 'Reusable Tote', cat: 'Cleaning', impactKg: 0.4, img: 'https://images.unsplash.com/photo-1541921671-01dfd297f05b' },
      { id: 5, name: 'Compostable Sponge', cat: 'Cleaning', impactKg: 0.2, img: 'https://images.unsplash.com/photo-1593055752832-9f37a4e0accd' },
      { id: 6, name: 'Glass Food Container', cat: 'Kitchen', impactKg: 0.6, img: 'https://images.unsplash.com/photo-1606259454390-9f0a9ec6f3b0' },
    ];

    const POSTS = [
      { id: 101, title: 'Refill stations near AUST cafeteria', body: 'Bring your bottle—two new water refill points installed last week.', score: 18, anon: false },
      { id: 102, title: 'Shampoo bar lasts ~2 months', body: 'Less plastic and surprisingly cheaper long‑term.', score: 25, anon: true },
      { id: 103, title: 'Swap plastic wrap for beeswax wraps', body: 'Found at local shop in Tejgaon.', score: 11, anon: false },
    ];

    const REPORTS = [
      { id: 'R-3401', type: 'Post', reason: 'Spam', submitted: '2025-08-17', actions: ['Dismiss', 'Remove', 'Ban'] },
      { id: 'R-3419', type: 'Comment', reason: 'Harassment', submitted: '2025-08-28', actions: ['Dismiss', 'Warn', 'Mute'] },
    ];

    // Helpers
    const $ = (q) => document.querySelector(q);
    const $$ = (q) => Array.from(document.querySelectorAll(q));


    function toggleMenu(){
      const nav = document.getElementById('mainNav');
      nav.style.display = nav.style.display === 'block' ? '' : 'block';
    }

    // Render products
    function renderProducts(list = PRODUCTS) {
      const grid = document.getElementById('productGrid');
      grid.innerHTML = '';
      list.forEach(p => {
        const el = document.createElement('article');
        el.className = 'card';
        el.innerHTML = `
          <div class="body">
            <div class="product">
              <img src="${p.img}&auto=format&fit=crop&w=160&q=60" alt="${p.name}"/>
              <div>
                <h3>${p.name}</h3>
                <div class="muted">Category: ${p.cat}</div>
                <div class="muted">Est. plastic saved / mo: <b style="color: var(--primary)">${p.impactKg} kg</b></div>
              </div>
            </div>
            <div style="margin-top: 16px; display: flex; gap: 10px">
              <button class="btn btn-primary">Save</button>
              <button class="btn btn-ghost">Details</button>
            </div>
          </div>`;
        grid.appendChild(el);
      });
      document.getElementById('m-products').textContent = list.length + '+';
    }

    function filterProducts(){
      const q = $('#search').value.toLowerCase().trim();
      const cat = $('#category').value;
      let filtered = PRODUCTS.filter(p => (!cat || p.cat===cat) && (!q || p.name.toLowerCase().includes(q)));
      renderProducts(filtered);
    }

    // Calculator (simple illustrative model)
    function calcImpact(){
      const bottles = Math.max(0, parseFloat($('#bottles').value||0));
      const bags = Math.max(0, parseFloat($('#bags').value||0));
      const straws = Math.max(0, parseFloat($('#straws').value||0));
      const adoption = Math.max(0, Math.min(100, parseFloat($('#adoption').value||0))) / 100;
      // Approximate mass per item (kg): bottle 0.025, bag 0.005, straw 0.001
      const weeklyKg = bottles*0.025 + bags*0.005 + straws*0.001;
      const monthlyKg = weeklyKg * 4.3 * adoption; // 4.3 weeks/month
      $('#plasticSaved').textContent = monthlyKg.toFixed(2) + ' kg';
      $('#m-saved').textContent = '~' + monthlyKg.toFixed(1) + 'kg';
    }
    function saveEstimate(){
      alert('Estimate saved to profile (demo).');
    }

    // Community
    function renderPosts(){
      const wrap = $('#postList');
      wrap.innerHTML = '';
      POSTS.sort((a,b)=>b.score-a.score).forEach(p=>{
        const section = document.createElement('section');
        section.className = 'post';
        section.innerHTML = `
          <div style="display: flex; justify-content: space-between; align-items: start; gap: 16px">
            <div style="flex: 1">
              <h3 style="margin: 0 0 8px; font-size: 16px">${p.title}${p.anon ? ' <span class="muted" style="font-weight: 400; font-size: 13px">(anonymous)</span>' : ''}</h3>
              <div class="muted" style="margin-bottom: 12px">${p.body}</div>
            </div>
            <div class="votes">
              <button class="vote-btn" aria-label="Upvote" onclick="vote(${p.id},1)">▲</button>
              <strong id="score-${p.id}" style="color: var(--primary); min-width: 24px; text-align: center">${p.score}</strong>
              <button class="vote-btn" aria-label="Downvote" onclick="vote(${p.id},-1)">▼</button>
            </div>
          </div>`;
        wrap.appendChild(section);
      })
    }
    function vote(id, delta){
      const post = POSTS.find(p=>p.id===id); if(!post) return;
      post.score += delta; if(post.score < 0) post.score = 0;
      document.getElementById('score-'+id).textContent = post.score;
    }

    function openPostDialog(){ document.getElementById('postDialog').showModal() }
    function submitPost(){
      const title = $('#postTitle').value.trim();
      const body = $('#postBody').value.trim();
      const anon = $('#anon').checked;
      if(!title){ alert('Please add a title'); return }
      POSTS.push({ id: Date.now(), title, body, score: 1, anon });
      $('#postTitle').value = ''; $('#postBody').value=''; $('#anon').checked=false;
      document.getElementById('postDialog').close();
      renderPosts();
    }

    // Local availability (mock)
    function searchLocal(){
      const area = $('#location').value.trim();
      const item = $('#item').value.trim();
      const out = $('#localResults');
      if(!area && !item){ out.textContent = 'Please enter area or item.'; return }
      out.innerHTML = `<div style="margin: 12px 0 0; padding: 16px; background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius-sm)">
        <strong style="color: var(--text)">Search Results</strong>
        <div class="muted" style="margin: 8px 0">${item || 'Sustainable items'} available near ${area || 'your area'}:</div>
        <div style="margin: 12px 0 0; display: grid; gap: 8px">
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0">
            <span>GreenMart • ${area || 'Tejgaon'}</span>
            <span class="status-badge status-success">In stock</span>
          </div>
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0">
            <span>Campus Co‑op • AUST</span>
            <span class="status-badge status-warning">Pre‑order</span>
          </div>
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0">
            <span>EcoHub • ${area || 'Tejgaon'}</span>
            <span class="status-badge status-warning">Limited stock</span>
          </div>
        </div>
      </div>`;
    }
    function clearLocal(){ $('#location').value=''; $('#item').value=''; $('#localResults').textContent='Enter location and item to search for local availability.' }

    // Admin
    function renderReports(){
      const t = $('#reportsTable'); t.innerHTML = '';
      REPORTS.forEach(r=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td style="font-weight: 500">${r.id}</td>
          <td>${r.type}</td>
          <td>${r.reason}</td>
          <td>${r.submitted}</td>
          <td>
            <div style="display: flex; gap: 8px; flex-wrap: wrap">
              ${r.actions.map(a=>`<button class='btn btn-ghost' style="padding: 6px 12px; font-size: 12px" onclick=\"alert('${a} action (demo)')\">${a}</button>`).join('')}
            </div>
          </td>`;
        t.appendChild(tr);
      })
    }
    

    // Auth
    function openAuth(mode){
      $('#authTitle').textContent = mode === 'signup' ? 'Create account' : 'Log in';
      document.getElementById('authDialog').showModal();
    }
    function closeAuth(){ document.getElementById('authDialog').close() }

    // Init
    renderProducts();
    renderPosts();
    renderReports();
    calcImpact();
    document.getElementById('year').textContent = new Date().getFullYear();

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });
    });
  </script>

  @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
